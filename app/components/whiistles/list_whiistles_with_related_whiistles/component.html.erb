<% @whiistles.each do |whiistle|  %>

  <%= render Whiistles::Container::Component.new do %>
  
    <% if whiistle.label == "primary_whiistle" %>

      <% if whiistle.is_a? Reply %>
      
        <% if whiistle.path.count >= 3 %>
          <%= render Whiistles::Whiistle::Component.new(whiistle: whiistle.root, current_user_presenter: @current_user_presenter) %>
          
          <% if whiistle.path.count >= 4 %>

            <%= link_to "Show more replies", whiistle_path(whiistle.root) %>

          <% end %>
          
        <% end %>
        
        <%= render Whiistles::Whiistle::Component.new(whiistle: whiistle.whiistle, current_user_presenter: @current_user_presenter) %>

      <% end %>
      
      <%= render Whiistles::Whiistle::Component.new(whiistle: whiistle, current_user_presenter: @current_user_presenter) %>

      <% if (whiistle.is_a? Whiistle) && whiistle.flood.present? %>

        <%= render Whiistles::MinifiedFloods::Component.new(whiistle: whiistle, current_user_presenter: @current_user_presenter) %>
        
      <% end %>  

    <% elsif whiistle.label == "shared_whiistle" %>
    
      <%= render Whiistles::Whiistle::Component.new(whiistle: whiistle, current_user_presenter: @current_user_presenter, show_flood_info: true) %>

    <% end %>
  <% end %>
  
<% end %>